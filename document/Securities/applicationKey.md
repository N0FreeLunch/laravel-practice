## 애플리케이션 키

### 애플리케이션 키의 역할
- 양방향 암호화에 사용하기 위한 키를 의미한다.
- 라라벨 애플리케이션에서 단방향 암호화는 세션, CSRF, Cookie 등에 사용된다.
- 웹 통신을 이루는 기본적인 기능에 사용되기 때문에 라라벨을 설치하고 애플리케이션 키는 반드시 설치해야 한다.

### 어카운트 비밀번호
- 어카운트의 비밀번호는 양방향 암호화가 아닌 단방향 암호화의 일종인 해시를 사용한다. 양방향 암호화는 암호를 해독하기 위한 키가 반드시 필요하지만 단방향 암호화는 암호를 해독할 필요가 없기 때문에 키를 필요로 하지 않는다. 물론 경우에 따라 특정 방향의 암호화를 하기 위해서 이를 조정하는 키를 사용할 경우도 있지만, 이는 애플리케이션 키와 별도로 사용되므로 어카운트의 비밀번호에는 영향을 주지 않는다.

### 애플리케이션 키의 관리 방법
- 애플리케이션 키는 각종 암호화에 관여하는 키이므로 엄격하게 관리 되어야 한다.
- 흔히 서버의 환경을, 로컬(개발 환경), 데브(검증환경), 프로덕션(실제 서버)로 나뉜다.
- 프로덕션은 핵심 개발 인원들로 엄격히 관리가 된다. 하지만 검증환경의 경우에는 회사 내의 프로덕션 환경을 관리하는 사람 뿐만 아니라 다양한 개발자가 코드를 올릴 수 있고, 환경을 확인할 수 있도록 하는 경우가 많이 있다. 또한 검증 환경은 여러 가지 현상들을 확인하고 테스트를 할 수 있는 곳이다. 누군가 코딩을 잘못해서 키의 누출이 일어났을 때, 검증환경을 이용하는 사람들이 이 코드를 보게 되었다면 검증환경을 사용하는 다수의 누군가가 악용할 수도 있다.
- 로컬 환경은 프리랜서를 고용하기도 하며, 개발에 대한 충분한 경험이 없는 사람들에게 일을 맡길 때도 사용하는 곳으로 실수가 자주 일어날 수 있고, 충분히 검증되지 않은 사람들이 암호화 키를 함부로 다룰 수도 있기 때문에 통제되지 않는 상황에 놓일 수 있게 된다.
- 따라서 암호화에 사용되는 애플리케이션 키는 로컬, 데브, 프로덕션 환경 별로 발급해서 사용해야 하며, 각각의 환경의 애플리케이션 키가 다르더라도 서로의 동작에 이상이 없도록 만들어야 한다.

### 암호화된 정보의 저장
- 애플리케이션 키를 이용한 암호화 결과가 데이터베이스에 저장될 수 있다. 이 정보는 애플리케이션 키가 있어서 디크립션하여 사용할 수 있는데, 애플리케이션 키가 변경되면 이들 암호화 정보를 다시 원상 복구 할 수 없게 된다. 로컬에서는 저장된 암호화 정보를 날려 버리고 새로 만들어도 특별히 문제가 없는 경우가 있고, 데브 서버에서도 이전의 데이터를 못 이용해도 비즈니스상 크리티컬한 문제가 발생하지 않지만, 프로덕션 서버에서는 애플리케이션 키가 변경, 유실 된다면 기존의 비즈니스에서 이용하는 암호화된 데이터를 복구 할 수 없으므로 적절한 관리 방법으로 관리 되어야 한다.

### 라라벨 애플리케이션 키를 생성하는 방법
```
php artisan key:generate
```

### env
- 애플리케이션 키는 ENV 파일에 저장이 된다.
```
APP_KEY=
```
- env 파일에 APP_KEY의 값이 생성된다.

## Refenece
- https://stackoverflow.com/a/60901133/22600994
